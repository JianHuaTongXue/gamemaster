<div class="pageContent">
    <form id="pagerForm" onsubmit="return closeNavTab(this);" action="startup/server_whitelist" method="post"
          onreset="$(this).find('select.combox').comboxReset()">
        <div class="pageFormContent" layoutH="57">
            <div class="searchBar">
                <table width="98%" style="border-collapse:separate; border-spacing:5px;">
                    <thead>
                    <tr>
                        <th width="15%"></th>
                        <th width="85%"></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>状态:</td>
                        <td>
                            <select name="whiteListEnable">
                                <option value="1">已启用</option>
                                <option value="0">已关闭</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>白名单(逗号分割)</td>
                        <td><textarea name="whiteList" rows="3" style="resize:none;width: 152px"></textarea></td>
                    </tr>
                    <tr>
                        <td>
                            <label>区服类型</label>
                        </td>
                        <td>
                            <select name="serverGroup" id="serverType">
                                <option value="">全部</option>
                                <option value="ingcle" th:selected="${request.serverGroup=='ingcle'}">硬核专服</option>
                                <option value="ingcle_mixture" th:selected="${request.serverGroup=='ingcle_mixture'}">大混服专服</option>
                                <option value="ingcle_iOS" th:selected="${request.serverGroup=='ingcle_iOS'}">IOS专服</option>
                                <option value="other" th:selected="${request.serverGroup=='other'}">其他</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" id="allSelect"/>全选</td>
                        <td>
                            <ul id="serverList">
                                <li th:each="row:${serverList}" style="width:200px;display: inline-block"><input class="required" type="checkbox" name="ids" th:text="${row.serverName}" th:value="${row.serverId}"/></li>
                            </ul>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="formBar">
            <ul>
                <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                <li>
                    <div class="button">
                        <div class="buttonContent">
                            <button class="close">取消</button>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="button">
                        <div class="buttonContent">
                            <button type="submit">保存</button>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </form>
</div>
<script type="text/javascript">
    $('#allSelect').click(function () {
        var ids = $('input[name=ids]');
        for(var i=0;i<ids.length;i++){
            if($(this).prop("checked")){
                ids.eq(i).prop("checked",true);
            }else{
                ids.eq(i).prop("checked",false);
            }
        }
    });
    $('#serverType').change(function () {
        $.post("startup/server_list", "serverGroup=" + $(this).val(), function (data) {
            var serverList = $('#serverList');
            serverList.empty();
            for (var i = 0, l = data.length; i < l; i++) {
                var serverName = data[i].serverName;
                var serverId = data[i].serverId;
                serverList.append("<li style='width:200px;display: inline-block'><input class='required' type='checkbox' name='ids' value='" + serverId + "'/>" + serverName + "</li>")
            }
        });
    });
</script>