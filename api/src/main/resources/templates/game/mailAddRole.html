<div class="pageContent" xmlns:th="http://www.w3.org/1999/xhtml">
    <form method="post" onsubmit="return closeNavTab(this);" action="operatingTools/sendmail" class="pageForm required-validate">
        <input type="hidden" name="mailType" value="3"/>
        <table width="98%" style="height:100%;border-collapse:separate; border-spacing:5px;">
            <thead>
            <tr>
                <th width="20%"></th>
                <th width="80%"></th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td><input type="checkbox" id="allSelect"/>全选</td>
                <td>
                    <input class="required" th:each="row:${serverList}" type="checkbox" name="ids" th:text="${row.serverName}" th:value="${row.serverId}"/>
                </td>
            </tr>
            <tr>
                <td>角色ID<br/>玩家id1,玩家id2</td>
                <td>
                    <textarea name="playerids" class="textArea required" cols="30" rows="4" style="resize: none"></textarea>
                </td>
            </tr>
            <tr>
                <td>发件人</td>
                <td><input type="text" title="发件人" value="系统邮件" name="sender" class="required textInput"/></td>
            </tr>
            <tr>
                <td>邮件标题</td>
                <td><input type="text" title="标题" value="" name="title" class="required textInput"/></td>
            </tr>
            <tr>
                <td>邮件内容</td>
                <td>
                    <textarea name="content" class="required textArea" cols="30" rows="4" style="resize: none"></textarea>
                </td>
            </tr>
            <tr>
                <td>物品</td>
                <td>
                    <select id="role_goods">
                        <option th:each="goods:${goodsList}" th:text="${goods.name}" th:value="${goods.id}"></option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>数量</td>
                <td><input type="number" id="role_count" min="1"/><input type="button" value="添加" id="addButton"/></td>
            </tr>
            <tr>
                <td>奖励</td>
                <td>
                    <textarea name="rewards" class="textArea readonly" cols="30" rows="4" style="resize: none;margin-top: 10px" id="reward" readonly="readonly"></textarea>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <button type="submit">发送</button>
                    <button class="close">取消</button>
                </td>
            </tr>
            </tbody>
        </table>
    </form>
</div>
<script type="text/javascript">
    $(function () {
        $('#mail_goods').searchableSelect();
    });
    $('#allSelect').click(function () {
        var ids = $('input[name=ids]');
        for(var i=0;i<ids.length;i++){
            if($(this).prop("checked")){
                ids.eq(i).prop("checked",true);
            }else{
                ids.eq(i).prop("checked",false);
            }
        }
    });
    $('#addButton').click(function () {
        var goods = $('#role_goods').val();
        var count = $('#role_count').val();
        if(count>0){
            $('#reward').val($('#reward').val() + goods + ":" + count + ";\n");
        }else{
            alert("请选择物品数量");
        }
    });
</script>